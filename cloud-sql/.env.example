# ===========================================
# CLOUD SQL CONFIGURATION - LMS PLATFORM
# ===========================================
# Copiar estas variables a tu archivo .env

# ============ BASE DE DATOS ============
# Cloud SQL - Conexión directa (desarrollo/testing)
DATABASE_URL="mysql://lms_user:TU_PASSWORD@TU_PUBLIC_IP:3306/lms_platform?ssl-mode=REQUIRED"

# Cloud SQL - Read Replica (para analytics y reportes)
DATABASE_READ_URL="mysql://lms_user:TU_PASSWORD@TU_REPLICA_IP:3306/lms_platform?ssl-mode=REQUIRED"

# Para migración de datos (BD actual → Cloud SQL)
DATABASE_URL_SOURCE="mysql://tu_usuario_actual:password@host:3306/db_actual"
DATABASE_URL_TARGET="mysql://lms_user:TU_PASSWORD@TU_PUBLIC_IP:3306/lms_platform?ssl-mode=REQUIRED"

# ============ PARA GKE DEPLOYMENT ============
# Cloud SQL Proxy (usar en producción con GKE)
DATABASE_URL_PRODUCTION="mysql://lms_user:TU_PASSWORD@127.0.0.1:3306/lms_platform"

# Conexión por Unix Socket (máximo performance en GKE)
DATABASE_URL_SOCKET="mysql://lms_user:TU_PASSWORD@localhost/lms_platform?socket=/cloudsql/TU_PROJECT_ID:TU_REGION:TU_INSTANCE_NAME"

# ============ CONFIGURACIÓN CLOUD SQL ============
CLOUD_SQL_CONNECTION_NAME="TU_PROJECT_ID:TU_REGION:TU_INSTANCE_NAME"
CLOUD_SQL_INSTANCE_NAME="lms-production"
CLOUD_SQL_DATABASE_NAME="lms_platform"
CLOUD_SQL_USER="lms_user"
CLOUD_SQL_PASSWORD="TU_PASSWORD_GENERADO"
CLOUD_SQL_PROJECT_ID="TU_PROJECT_ID"
CLOUD_SQL_REGION="us-central1"

# ============ CONFIGURACIÓN EXISTENTE ============
# Mantener toda tu configuración actual de:

# Clerk (Autenticación) - SIN CAMBIOS
NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY="pk_test_..."
CLERK_SECRET_KEY="sk_test_..."

# Google Cloud Storage (Videos) - SIN CAMBIOS
GOOGLE_CLOUD_PROJECT_ID="tu-project-id"
GOOGLE_CLOUD_KEY_FILE="./google-cloud-credentials.json"
GOOGLE_CLOUD_BUCKET_NAME="tu-lms-videos-bucket"

# Stripe (Pagos) - SIN CAMBIOS
STRIPE_API_KEY="sk_test_..."
STRIPE_WEBHOOK_SECRET="whsec_..."
NEXT_PUBLIC_APP_URL="http://localhost:3000"

# Mux (Videos legacy) - SIN CAMBIOS
MUX_TOKEN_ID="tu_mux_token_id"
MUX_TOKEN_SECRET="tu_mux_token_secret"

# UploadThing (Archivos) - SIN CAMBIOS
UPLOADTHING_SECRET="sk_live_..."
UPLOADTHING_APP_ID="app_..."

# ============ CONFIGURACIÓN DE PERFORMANCE ============
# Para conexiones optimizadas (opcional)
DATABASE_CONNECTION_POOL_SIZE="20"
DATABASE_CONNECTION_TIMEOUT="60000"
DATABASE_QUERY_TIMEOUT="30000"

# ============ CONFIGURACIÓN DE DESARROLLO ============
# Para usar múltiples entornos
NODE_ENV="development"
DATABASE_URL_DEV="mysql://lms_user:PASSWORD@PUBLIC_IP:3306/lms_platform_dev?ssl-mode=REQUIRED"
DATABASE_URL_STAGING="mysql://lms_user:PASSWORD@PUBLIC_IP:3306/lms_platform_staging?ssl-mode=REQUIRED"
DATABASE_URL_PROD="mysql://lms_user:PASSWORD@127.0.0.1:3306/lms_platform"

# ============ CONFIGURACIÓN DE LOGS ============
# Para debugging de Cloud SQL
DEBUG_SQL="false"
LOG_LEVEL="info"

# ============ NOTAS IMPORTANTES ============
# 1. Reemplaza TU_PASSWORD con la contraseña generada por el script
# 2. Reemplaza TU_PUBLIC_IP con la IP pública de Cloud SQL
# 3. Reemplaza TU_PROJECT_ID con tu ID de proyecto de Google Cloud
# 4. En producción, usar DATABASE_URL_PRODUCTION o DATABASE_URL_SOCKET
# 5. Para desarrollo local, usar DATABASE_URL normal
# 6. DATABASE_READ_URL es opcional, solo para separar lectura/escritura

# ============ COMANDOS ÚTILES ============
# Probar conexión: node cloud-sql/test-connection.js
# Migrar datos: node cloud-sql/migrate-data.js --confirm
# Aplicar schema: npx prisma db push
# Generar cliente: npx prisma generate
